# search-schema
JSON Schemas for documents from the [HuBMAP Search API](https://github.com/hubmapconsortium/search-api/):
The [HuBMAP Portal](https://github.com/hubmapconsortium/portal-ui) depends on there being a consistent document structure.

The wrapped metadata elements in these documents come from metadata TSVs submitted along with the data;
Their structure is described by [ingest-validation-tools](https://github.com/hubmapconsortium/ingest-validation-tools/tree/master/docs).

## Usage

### Validation

JSON Schemas (as YAML) are in [`data/schemas`](data/schemas).
If you'll need packaging, or update notification, or a different format, let me know.

## Development

After checkout and cd:
```
pip install -r requirements.txt
pip install -r requirements-dev.txt
./test.sh
```

- Schemas begin as TSV files.
- The information is then consolidated into a single YAML by `definitions-tsv-to-yaml.py`.
- And from that single YAML, JSON Schemas are generated by `definitions-yaml-to-schema.py`.

### Update

The schemas are derived from TSVs in [`data/definitions`](data/definitions).
If updates are needed, please make the changes there,
and Chuck will regenerate the schemas.
